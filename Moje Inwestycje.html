<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moje Inwestycje</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide Icons as SVG components
        const PlusCircle = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="16"></line>
                <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
        );

        const Trash2 = () => (
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Wallet = () => (
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path>
                <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path>
                <path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path>
            </svg>
        );

        const InvestmentTracker = () => {
            const IKE_LIMIT_2026 = 28260.00;
            const IKZE_LIMIT_2026 = 11304.00;

            const categories = ['IKE', 'IKZE', 'Obligacje', 'Lokaty', 'ETFy', 'PPK'];
            
            const [investments, setInvestments] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [newInvestment, setNewInvestment] = useState({
                category: 'IKE',
                name: '',
                amount: '',
                year2026: false
            });
            const [monthlyDeposits, setMonthlyDeposits] = useState([]);
            const [showDepositForm, setShowDepositForm] = useState(false);
            const [newDeposit, setNewDeposit] = useState({
                month: new Date().getMonth(),
                category: 'IKE',
                amount: ''
            });
            const [savingsGoal, setSavingsGoal] = useState(40000);
            const [showHistory, setShowHistory] = useState(false);
            const [editingGoal, setEditingGoal] = useState(false);
            const [tempGoal, setTempGoal] = useState('40000');

            useEffect(() => {
                const saved = localStorage.getItem('investments');
                if (saved) {
                    setInvestments(JSON.parse(saved));
                }
                const savedDeposits = localStorage.getItem('monthlyDeposits');
                if (savedDeposits) {
                    setMonthlyDeposits(JSON.parse(savedDeposits));
                }
                const savedGoal = localStorage.getItem('savingsGoal');
                if (savedGoal) {
                    const goalValue = parseFloat(savedGoal);
                    setSavingsGoal(goalValue);
                    setTempGoal(goalValue.toString());
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('investments', JSON.stringify(investments));
            }, [investments]);

            useEffect(() => {
                localStorage.setItem('monthlyDeposits', JSON.stringify(monthlyDeposits));
            }, [monthlyDeposits]);

            useEffect(() => {
                localStorage.setItem('savingsGoal', savingsGoal.toString());
            }, [savingsGoal]);

            const addInvestment = () => {
                if (newInvestment.name && newInvestment.amount) {
                    setInvestments([...investments, {
                        id: Date.now(),
                        ...newInvestment,
                        amount: parseFloat(newInvestment.amount)
                    }]);
                    setNewInvestment({ category: 'IKE', name: '', amount: '', year2026: false });
                    setShowForm(false);
                }
            };

            const deleteInvestment = (id) => {
                setInvestments(investments.filter(inv => inv.id !== id));
            };

            const getCategoryTotal = (category) => {
                return investments
                    .filter(inv => inv.category === category)
                    .reduce((sum, inv) => sum + inv.amount, 0);
            };

            const getCurrentYearContributions = (category) => {
                return investments
                    .filter(inv => inv.category === category && inv.year2026)
                    .reduce((sum, inv) => sum + inv.amount, 0);
            };

            const getTotalAccumulated = (category) => {
                return investments
                    .filter(inv => inv.category === category && !inv.year2026)
                    .reduce((sum, inv) => sum + inv.amount, 0);
            };

            const getTotalPortfolio = () => {
                return investments.reduce((sum, inv) => sum + inv.amount, 0);
            };

            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('pl-PL', {
                    style: 'currency',
                    currency: 'PLN'
                }).format(amount);
            };

            const getProgressColor = (used, limit) => {
                const percentage = (used / limit) * 100;
                if (percentage >= 100) return 'bg-green-500';
                if (percentage >= 75) return 'bg-yellow-500';
                return 'bg-blue-500';
            };

            const getRemainingLimit = (category, limit) => {
                const currentYear = getCurrentYearContributions(category);
                return Math.max(0, limit - currentYear);
            };

            const monthNames = ['StyczeÅ„', 'Luty', 'Marzec', 'KwiecieÅ„', 'Maj', 'Czerwiec', 
                               'Lipiec', 'SierpieÅ„', 'WrzesieÅ„', 'PaÅºdziernik', 'Listopad', 'GrudzieÅ„'];

            const addDeposit = () => {
                if (newDeposit.amount && parseFloat(newDeposit.amount) > 0) {
                    setMonthlyDeposits([...monthlyDeposits, {
                        id: Date.now(),
                        ...newDeposit,
                        amount: parseFloat(newDeposit.amount)
                    }]);
                    setNewDeposit({ month: new Date().getMonth(), category: 'IKE', amount: '' });
                    setShowDepositForm(false);
                }
            };

            const deleteDeposit = (id) => {
                setMonthlyDeposits(monthlyDeposits.filter(dep => dep.id !== id));
            };

            const getMonthTotal = (monthIndex) => {
                return monthlyDeposits
                    .filter(dep => dep.month === monthIndex)
                    .reduce((sum, dep) => sum + dep.amount, 0);
            };

            const getMonthlyData = () => {
                return monthNames.map((name, index) => ({
                    month: name,
                    total: getMonthTotal(index)
                }));
            };

            const getMaxMonthlyAmount = () => {
                const amounts = monthNames.map((_, index) => getMonthTotal(index));
                return Math.max(...amounts, 1);
            };

            const getTotalDepositsYear = () => {
                return monthlyDeposits.reduce((sum, dep) => sum + dep.amount, 0);
            };

            const getDepositsByCategory = (category) => {
                return monthlyDeposits
                    .filter(dep => dep.category === category)
                    .reduce((sum, dep) => sum + dep.amount, 0);
            };

            const getRemainingLimitFromDeposits = (category, limit) => {
                const deposited = getDepositsByCategory(category);
                return Math.max(0, limit - deposited);
            };

            const getMonthsRemaining = () => {
                const currentMonth = new Date().getMonth(); // 0-11
                return 12 - currentMonth; // miesiÄ™cy do koÅ„ca roku
            };

            const getRequiredMonthlyAmount = (category, limit) => {
                const remaining = getRemainingLimitFromDeposits(category, limit);
                const monthsLeft = getMonthsRemaining();
                if (monthsLeft === 0) return 0;
                return remaining / monthsLeft;
            };

            const getGoalProgress = () => {
                const total = getTotalDepositsYear();
                return Math.min((total / savingsGoal) * 100, 100);
            };

            const getPortfolioHistory = () => {
                const history = [];
                let cumulative = 0;
                
                for (let i = 0; i < 12; i++) {
                    const monthTotal = getMonthTotal(i);
                    cumulative += monthTotal;
                    history.push({
                        month: monthNames[i],
                        amount: cumulative
                    });
                }
                
                return history;
            };

            const getMaxHistoryAmount = () => {
                const history = getPortfolioHistory();
                const max = Math.max(...history.map(h => h.amount), 1);
                return max;
            };

            const saveGoal = () => {
                const newGoal = parseFloat(tempGoal);
                if (newGoal && newGoal > 0) {
                    setSavingsGoal(newGoal);
                    setEditingGoal(false);
                }
            };

            const cancelEditGoal = () => {
                setTempGoal(savingsGoal.toString());
                setEditingGoal(false);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                            <div className="flex items-center justify-between mb-6">
                                <div className="flex items-center gap-3">
                                    <Wallet />
                                    <h1 className="text-3xl font-bold text-slate-800">Moje Inwestycje</h1>
                                </div>
                                <div className="text-right">
                                    <p className="text-sm text-slate-500">WartoÅ›Ä‡ caÅ‚kowita</p>
                                    <p className="text-3xl font-bold text-blue-600">{formatCurrency(getTotalPortfolio())}</p>
                                </div>
                            </div>

                            <div className="bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl p-6 mb-6">
                                <div className="flex items-center justify-between mb-3">
                                    <div className="flex-1">
                                        <h3 className="text-lg font-bold text-slate-800">ðŸŽ¯ Cel oszczÄ™dnoÅ›ciowy 2026</h3>
                                        {editingGoal ? (
                                            <div className="flex items-center gap-2 mt-2">
                                                <span className="text-sm text-slate-600">Cel roczny:</span>
                                                <input
                                                    type="number"
                                                    value={tempGoal}
                                                    onChange={(e) => setTempGoal(e.target.value)}
                                                    className="px-3 py-1 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent w-32"
                                                />
                                                <span className="text-sm text-slate-600">zÅ‚</span>
                                                <button
                                                    onClick={saveGoal}
                                                    className="text-xs bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg transition-colors"
                                                >
                                                    Zapisz
                                                </button>
                                                <button
                                                    onClick={cancelEditGoal}
                                                    className="text-xs bg-slate-400 hover:bg-slate-500 text-white px-3 py-1 rounded-lg transition-colors"
                                                >
                                                    Anuluj
                                                </button>
                                            </div>
                                        ) : (
                                            <div className="flex items-center gap-2">
                                                <p className="text-sm text-slate-600">Cel roczny: {formatCurrency(savingsGoal)}</p>
                                                <button
                                                    onClick={() => setEditingGoal(true)}
                                                    className="text-xs bg-purple-200 hover:bg-purple-300 text-purple-700 px-2 py-1 rounded transition-colors"
                                                >
                                                    Edytuj
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                    <div className="text-right">
                                        <p className="text-3xl font-bold text-purple-600">{getGoalProgress().toFixed(1)}%</p>
                                        <p className="text-sm text-slate-600">{formatCurrency(getTotalDepositsYear())} / {formatCurrency(savingsGoal)}</p>
                                    </div>
                                </div>
                                <div className="w-full bg-purple-200 rounded-full h-4">
                                    <div 
                                        className="bg-gradient-to-r from-purple-500 to-purple-600 h-4 rounded-full transition-all duration-500 flex items-center justify-end pr-2"
                                        style={{ width: `${getGoalProgress()}%` }}
                                    >
                                        {getGoalProgress() > 10 && (
                                            <span className="text-xs font-bold text-white">{getGoalProgress().toFixed(0)}%</span>
                                        )}
                                    </div>
                                </div>
                                <div className="mt-3 text-sm text-slate-600">
                                    {getTotalDepositsYear() >= savingsGoal ? (
                                        <p className="font-semibold text-green-700">ðŸŽ‰ Gratulacje! OsiÄ…gnÄ…Å‚eÅ› swÃ³j cel!</p>
                                    ) : (
                                        <p>PozostaÅ‚o do celu: <span className="font-bold text-purple-700">{formatCurrency(savingsGoal - getTotalDepositsYear())}</span></p>
                                    )}
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <div className="bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-2">
                                        <h3 className="font-semibold text-slate-700">IKE</h3>
                                        <span className="text-sm text-slate-600">{formatCurrency(getCategoryTotal('IKE'))}</span>
                                    </div>
                                    <div className="text-xs text-slate-600 mb-2 space-y-1">
                                        <div className="flex justify-between">
                                            <span>Zebrane wczeÅ›niej:</span>
                                            <span className="font-semibold">{formatCurrency(getTotalAccumulated('IKE'))}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>WpÅ‚acone w 2026:</span>
                                            <span className="font-semibold">{formatCurrency(getCurrentYearContributions('IKE'))}</span>
                                        </div>
                                        <div className="flex justify-between text-blue-700">
                                            <span>ZostaÅ‚o limitu:</span>
                                            <span className="font-bold">{formatCurrency(getRemainingLimit('IKE', IKE_LIMIT_2026))}</span>
                                        </div>
                                    </div>
                                    <div className="w-full bg-slate-200 rounded-full h-3 mb-1">
                                        <div 
                                            className={`h-3 rounded-full ${getProgressColor(getCurrentYearContributions('IKE'), IKE_LIMIT_2026)}`}
                                            style={{ width: `${Math.min((getCurrentYearContributions('IKE') / IKE_LIMIT_2026) * 100, 100)}%` }}
                                        ></div>
                                    </div>
                                    <p className="text-xs text-slate-500 mb-3">
                                        Limit 2026: {formatCurrency(IKE_LIMIT_2026)} 
                                        {getCurrentYearContributions('IKE') >= IKE_LIMIT_2026 && ' âœ“ Wykorzystany!'}
                                    </p>
                                    
                                    {investments.filter(inv => inv.category === 'IKE').length > 0 && (
                                        <div className="mt-3 space-y-2 border-t border-blue-200 pt-3">
                                            {investments.filter(inv => inv.category === 'IKE').map(inv => (
                                                <div key={inv.id} className="flex items-center justify-between p-2 bg-white rounded-lg">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2">
                                                            <p className="font-medium text-slate-700 text-sm">{inv.name}</p>
                                                            {inv.year2026 && (
                                                                <span className="text-xs bg-blue-500 text-white px-2 py-0.5 rounded">2026</span>
                                                            )}
                                                        </div>
                                                        <p className="text-xs text-blue-600 font-semibold">{formatCurrency(inv.amount)}</p>
                                                    </div>
                                                    <button
                                                        onClick={() => deleteInvestment(inv.id)}
                                                        className="text-red-500 hover:text-red-700 p-1 transition-colors"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <div className="bg-gradient-to-r from-green-50 to-green-100 rounded-xl p-4">
                                    <div className="flex items-center justify-between mb-2">
                                        <h3 className="font-semibold text-slate-700">IKZE</h3>
                                        <span className="text-sm text-slate-600">{formatCurrency(getCategoryTotal('IKZE'))}</span>
                                    </div>
                                    <div className="text-xs text-slate-600 mb-2 space-y-1">
                                        <div className="flex justify-between">
                                            <span>Zebrane wczeÅ›niej:</span>
                                            <span className="font-semibold">{formatCurrency(getTotalAccumulated('IKZE'))}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span>WpÅ‚acone w 2026:</span>
                                            <span className="font-semibold">{formatCurrency(getCurrentYearContributions('IKZE'))}</span>
                                        </div>
                                        <div className="flex justify-between text-green-700">
                                            <span>ZostaÅ‚o limitu:</span>
                                            <span className="font-bold">{formatCurrency(getRemainingLimit('IKZE', IKZE_LIMIT_2026))}</span>
                                        </div>
                                    </div>
                                    <div className="w-full bg-slate-200 rounded-full h-3 mb-1">
                                        <div 
                                            className={`h-3 rounded-full ${getProgressColor(getCurrentYearContributions('IKZE'), IKZE_LIMIT_2026)}`}
                                            style={{ width: `${Math.min((getCurrentYearContributions('IKZE') / IKZE_LIMIT_2026) * 100, 100)}%` }}
                                        ></div>
                                    </div>
                                    <p className="text-xs text-slate-500 mb-3">
                                        Limit 2026: {formatCurrency(IKZE_LIMIT_2026)}
                                        {getCurrentYearContributions('IKZE') >= IKZE_LIMIT_2026 && ' âœ“ Wykorzystany!'}
                                    </p>
                                    
                                    {investments.filter(inv => inv.category === 'IKZE').length > 0 && (
                                        <div className="mt-3 space-y-2 border-t border-green-200 pt-3">
                                            {investments.filter(inv => inv.category === 'IKZE').map(inv => (
                                                <div key={inv.id} className="flex items-center justify-between p-2 bg-white rounded-lg">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2">
                                                            <p className="font-medium text-slate-700 text-sm">{inv.name}</p>
                                                            {inv.year2026 && (
                                                                <span className="text-xs bg-green-500 text-white px-2 py-0.5 rounded">2026</span>
                                                            )}
                                                        </div>
                                                        <p className="text-xs text-green-600 font-semibold">{formatCurrency(inv.amount)}</p>
                                                    </div>
                                                    <button
                                                        onClick={() => deleteInvestment(inv.id)}
                                                        className="text-red-500 hover:text-red-700 p-1 transition-colors"
                                                    >
                                                        <Trash2 />
                                                    </button>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>

                            <button
                                onClick={() => setShowForm(!showForm)}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors"
                            >
                                <PlusCircle />
                                Dodaj inwestycjÄ™
                            </button>

                            {showForm && (
                                <div className="mt-4 p-4 bg-slate-50 rounded-lg">
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                        <select
                                            value={newInvestment.category}
                                            onChange={(e) => setNewInvestment({...newInvestment, category: e.target.value})}
                                            className="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        >
                                            {categories.map(cat => (
                                                <option key={cat} value={cat}>{cat}</option>
                                            ))}
                                        </select>
                                        <input
                                            type="text"
                                            placeholder="Nazwa (np. Lokata 3% PKO)"
                                            value={newInvestment.name}
                                            onChange={(e) => setNewInvestment({...newInvestment, name: e.target.value})}
                                            className="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                        <input
                                            type="number"
                                            placeholder="Kwota (PLN)"
                                            value={newInvestment.amount}
                                            onChange={(e) => setNewInvestment({...newInvestment, amount: e.target.value})}
                                            className="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                    {(newInvestment.category === 'IKE' || newInvestment.category === 'IKZE') && (
                                        <div className="mt-3 flex items-center gap-2">
                                            <input
                                                type="checkbox"
                                                id="year2026"
                                                checked={newInvestment.year2026}
                                                onChange={(e) => setNewInvestment({...newInvestment, year2026: e.target.checked})}
                                                className="w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                                            />
                                            <label htmlFor="year2026" className="text-sm text-slate-700">
                                                To jest wpÅ‚ata z 2026 roku (liczy siÄ™ do limitu)
                                            </label>
                                        </div>
                                    )}
                                    <div className="flex gap-2 mt-3">
                                        <button
                                            onClick={addInvestment}
                                            className="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition-colors"
                                        >
                                            Zapisz
                                        </button>
                                        <button
                                            onClick={() => setShowForm(false)}
                                            className="flex-1 bg-slate-400 hover:bg-slate-500 text-white py-2 rounded-lg transition-colors"
                                        >
                                            Anuluj
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h2 className="text-2xl font-bold text-slate-800">ðŸ“… Moje WpÅ‚aty 2026</h2>
                                    <p className="text-sm text-slate-500">Trackuj ile odkÅ‚adasz kaÅ¼dego miesiÄ…ca</p>
                                </div>
                                <div className="text-right">
                                    <p className="text-xs text-slate-500">OdÅ‚oÅ¼one w 2026</p>
                                    <p className="text-2xl font-bold text-green-600">{formatCurrency(getTotalDepositsYear())}</p>
                                </div>
                            </div>

                            <button
                                onClick={() => setShowDepositForm(!showDepositForm)}
                                className="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 transition-colors mb-4"
                            >
                                <PlusCircle />
                                Dodaj wpÅ‚atÄ™
                            </button>

                            {showDepositForm && (
                                <div className="mb-6 p-4 bg-slate-50 rounded-lg">
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                        <select
                                            value={newDeposit.month}
                                            onChange={(e) => setNewDeposit({...newDeposit, month: parseInt(e.target.value)})}
                                            className="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        >
                                            {monthNames.map((name, index) => (
                                                <option key={index} value={index}>{name}</option>
                                            ))}
                                        </select>
                                        <select
                                            value={newDeposit.category}
                                            onChange={(e) => setNewDeposit({...newDeposit, category: e.target.value})}
                                            className="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        >
                                            {categories.map(cat => (
                                                <option key={cat} value={cat}>{cat}</option>
                                            ))}
                                        </select>
                                        <input
                                            type="number"
                                            placeholder="Kwota (PLN)"
                                            value={newDeposit.amount}
                                            onChange={(e) => setNewDeposit({...newDeposit, amount: e.target.value})}
                                            className="px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                        />
                                    </div>
                                    <div className="flex gap-2 mt-3">
                                        <button
                                            onClick={addDeposit}
                                            className="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition-colors"
                                        >
                                            Zapisz
                                        </button>
                                        <button
                                            onClick={() => setShowDepositForm(false)}
                                            className="flex-1 bg-slate-400 hover:bg-slate-500 text-white py-2 rounded-lg transition-colors"
                                        >
                                            Anuluj
                                        </button>
                                    </div>
                                </div>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                <div className="bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-4">
                                    <h4 className="font-semibold text-slate-700 mb-3">IKE - Status limitu</h4>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between">
                                            <span className="text-slate-600">WpÅ‚acone w 2026:</span>
                                            <span className="font-bold text-slate-800">{formatCurrency(getDepositsByCategory('IKE'))}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className="text-slate-600">Limit 2026:</span>
                                            <span className="font-semibold text-slate-700">{formatCurrency(IKE_LIMIT_2026)}</span>
                                        </div>
                                        <div className="flex justify-between pt-2 border-t border-blue-200">
                                            <span className="text-blue-700 font-semibold">PozostaÅ‚o:</span>
                                            <span className="font-bold text-blue-700">{formatCurrency(getRemainingLimitFromDeposits('IKE', IKE_LIMIT_2026))}</span>
                                        </div>
                                        {getRemainingLimitFromDeposits('IKE', IKE_LIMIT_2026) > 0 && getMonthsRemaining() > 0 && (
                                            <div className="bg-blue-100 rounded-lg p-3 mt-3">
                                                <p className="text-xs text-blue-700 mb-1">Aby wypeÅ‚niÄ‡ limit do koÅ„ca roku:</p>
                                                <p className="text-lg font-bold text-blue-800">
                                                    {formatCurrency(getRequiredMonthlyAmount('IKE', IKE_LIMIT_2026))}/mies.
                                                </p>
                                                <p className="text-xs text-blue-600 mt-1">
                                                    ({getMonthsRemaining()} {getMonthsRemaining() === 1 ? 'miesiÄ…c' : 'miesiÄ™cy'} do koÅ„ca roku)
                                                </p>
                                            </div>
                                        )}
                                        {getRemainingLimitFromDeposits('IKE', IKE_LIMIT_2026) === 0 && (
                                            <div className="bg-green-100 rounded-lg p-3 mt-3">
                                                <p className="text-sm font-bold text-green-700">âœ“ Limit wykorzystany!</p>
                                            </div>
                                        )}
                                    </div>
                                </div>

                                <div className="bg-gradient-to-r from-green-50 to-green-100 rounded-xl p-4">
                                    <h4 className="font-semibold text-slate-700 mb-3">IKZE - Status limitu</h4>
                                    <div className="space-y-2 text-sm">
                                        <div className="flex justify-between">
                                            <span className="text-slate-600">WpÅ‚acone w 2026:</span>
                                            <span className="font-bold text-slate-800">{formatCurrency(getDepositsByCategory('IKZE'))}</span>
                                        </div>
                                        <div className="flex justify-between">
                                            <span className="text-slate-600">Limit 2026:</span>
                                            <span className="font-semibold text-slate-700">{formatCurrency(IKZE_LIMIT_2026)}</span>
                                        </div>
                                        <div className="flex justify-between pt-2 border-t border-green-200">
                                            <span className="text-green-700 font-semibold">PozostaÅ‚o:</span>
                                            <span className="font-bold text-green-700">{formatCurrency(getRemainingLimitFromDeposits('IKZE', IKZE_LIMIT_2026))}</span>
                                        </div>
                                        {getRemainingLimitFromDeposits('IKZE', IKZE_LIMIT_2026) > 0 && getMonthsRemaining() > 0 && (
                                            <div className="bg-green-100 rounded-lg p-3 mt-3">
                                                <p className="text-xs text-green-700 mb-1">Aby wypeÅ‚niÄ‡ limit do koÅ„ca roku:</p>
                                                <p className="text-lg font-bold text-green-800">
                                                    {formatCurrency(getRequiredMonthlyAmount('IKZE', IKZE_LIMIT_2026))}/mies.
                                                </p>
                                                <p className="text-xs text-green-600 mt-1">
                                                    ({getMonthsRemaining()} {getMonthsRemaining() === 1 ? 'miesiÄ…c' : 'miesiÄ™cy'} do koÅ„ca roku)
                                                </p>
                                            </div>
                                        )}
                                        {getRemainingLimitFromDeposits('IKZE', IKZE_LIMIT_2026) === 0 && (
                                            <div className="bg-green-100 rounded-lg p-3 mt-3">
                                                <p className="text-sm font-bold text-green-700">âœ“ Limit wykorzystany!</p>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                            <div className="mb-6">
                                <h3 className="text-lg font-bold text-slate-700 mb-4">ðŸ“Š Wykres wpÅ‚at</h3>
                                <div className="bg-gradient-to-br from-slate-50 to-slate-100 rounded-lg p-4">
                                    <div className="flex items-end justify-between gap-2 h-48">
                                        {getMonthlyData().map((data, index) => {
                                            const height = (data.total / getMaxMonthlyAmount()) * 100;
                                            return (
                                                <div key={index} className="flex-1 flex flex-col items-center gap-1">
                                                    <div className="text-xs font-semibold text-slate-700 mb-1">
                                                        {data.total > 0 ? formatCurrency(data.total).replace(' zÅ‚', '') : ''}
                                                    </div>
                                                    <div 
                                                        className="w-full bg-gradient-to-t from-green-500 to-green-400 rounded-t hover:from-green-600 hover:to-green-500 transition-all cursor-pointer"
                                                        style={{ height: `${height}%`, minHeight: data.total > 0 ? '8px' : '0px' }}
                                                        title={`${data.month}: ${formatCurrency(data.total)}`}
                                                    ></div>
                                                    <div className="text-xs text-slate-500 mt-1 -rotate-45 origin-top-left whitespace-nowrap">
                                                        {data.month.substring(0, 3)}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 className="text-lg font-bold text-slate-700 mb-3">ðŸ“‹ Lista wpÅ‚at</h3>
                                {monthNames.map((monthName, monthIndex) => {
                                    const monthDeposits = monthlyDeposits.filter(dep => dep.month === monthIndex);
                                    if (monthDeposits.length === 0) return null;
                                    
                                    const monthTotal = getMonthTotal(monthIndex);
                                    
                                    return (
                                        <div key={monthIndex} className="mb-4 bg-slate-50 rounded-lg p-4">
                                            <div className="flex items-center justify-between mb-3">
                                                <h4 className="font-bold text-slate-800">{monthName} 2026</h4>
                                                <span className="font-bold text-green-600">{formatCurrency(monthTotal)}</span>
                                            </div>
                                            <div className="space-y-2">
                                                {monthDeposits.map(deposit => (
                                                    <div key={deposit.id} className="flex items-center justify-between bg-white p-3 rounded-lg">
                                                        <div className="flex items-center gap-3">
                                                            <span className="text-xs font-semibold px-2 py-1 bg-blue-100 text-blue-700 rounded">
                                                                {deposit.category}
                                                            </span>
                                                            <span className="font-semibold text-slate-700">
                                                                {formatCurrency(deposit.amount)}
                                                            </span>
                                                        </div>
                                                        <button
                                                            onClick={() => deleteDeposit(deposit.id)}
                                                            className="text-red-500 hover:text-red-700 p-1 transition-colors"
                                                        >
                                                            <Trash2 />
                                                        </button>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    );
                                })}
                                {monthlyDeposits.length === 0 && (
                                    <p className="text-slate-400 text-center py-8 italic">
                                        Jeszcze nie dodaÅ‚eÅ› Å¼adnych wpÅ‚at. Kliknij "Dodaj wpÅ‚atÄ™" aby zaczÄ…Ä‡! ðŸš€
                                    </p>
                                )}
                            </div>
                        </div>

                        <div className="bg-white rounded-2xl shadow-xl p-6 mb-6">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h2 className="text-2xl font-bold text-slate-800">ðŸ“ˆ Historia Portfolio</h2>
                                    <p className="text-sm text-slate-500">Jak rosÅ‚y Twoje oszczÄ™dnoÅ›ci w 2026</p>
                                </div>
                                <button
                                    onClick={() => setShowHistory(!showHistory)}
                                    className="text-sm bg-slate-200 hover:bg-slate-300 px-4 py-2 rounded-lg transition-colors font-semibold"
                                >
                                    {showHistory ? 'Ukryj' : 'PokaÅ¼'}
                                </button>
                            </div>

                            {showHistory && (
                                <div>
                                    <div className="bg-gradient-to-br from-slate-50 to-slate-100 rounded-lg p-6 mb-6">
                                        <div className="relative h-64">
                                            <div className="absolute inset-0 flex items-end justify-between gap-1">
                                                {getPortfolioHistory().map((data, index) => {
                                                    const history = getPortfolioHistory();
                                                    const maxAmount = getMaxHistoryAmount();
                                                    const height = (data.amount / maxAmount) * 100;
                                                    const prevAmount = index > 0 ? history[index - 1].amount : 0;
                                                    
                                                    return (
                                                        <div key={index} className="flex-1 relative h-full flex flex-col justify-end">
                                                            {data.amount > 0 && (
                                                                <div className="absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-semibold text-slate-700 whitespace-nowrap">
                                                                    {formatCurrency(data.amount).replace(' zÅ‚', '')}
                                                                </div>
                                                            )}
                                                            <div 
                                                                className="w-full bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t hover:from-indigo-600 hover:to-indigo-500 transition-all cursor-pointer relative"
                                                                style={{ height: `${height}%`, minHeight: data.amount > 0 ? '4px' : '0px' }}
                                                                title={`${data.month}: ${formatCurrency(data.amount)}`}
                                                            >
                                                                {index > 0 && data.amount !== prevAmount && (
                                                                    <div className="absolute -top-1 left-1/2 transform -translate-x-1/2">
                                                                        <div className={`w-2 h-2 rounded-full ${data.amount > prevAmount ? 'bg-green-500' : 'bg-red-500'}`}></div>
                                                                    </div>
                                                                )}
                                                            </div>
                                                            <div className="text-xs text-slate-500 mt-2 text-center -rotate-45 origin-top whitespace-nowrap">
                                                                {data.month.substring(0, 3)}
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div className="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4">
                                            <p className="text-xs text-slate-600 mb-1">Åšrednia miesiÄ™czna</p>
                                            <p className="text-xl font-bold text-blue-700">
                                                {formatCurrency(getTotalDepositsYear() / 12)}
                                            </p>
                                        </div>
                                        <div className="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4">
                                            <p className="text-xs text-slate-600 mb-1">Najlepszy miesiÄ…c</p>
                                            <p className="text-xl font-bold text-green-700">
                                                {formatCurrency(Math.max(...monthNames.map((_, i) => getMonthTotal(i))))}
                                            </p>
                                        </div>
                                        <div className="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4">
                                            <p className="text-xs text-slate-600 mb-1">Aktywnych miesiÄ™cy</p>
                                            <p className="text-xl font-bold text-purple-700">
                                                {monthNames.filter((_, i) => getMonthTotal(i) > 0).length}/12
                                            </p>
                                        </div>
                                        <div className="bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-4">
                                            <p className="text-xs text-slate-600 mb-1">Tempo realizacji</p>
                                            <p className="text-xl font-bold text-amber-700">
                                                {getTotalDepositsYear() >= savingsGoal ? 'ðŸ”¥' : getGoalProgress() > 50 ? 'ðŸ‘' : 'ðŸ“ˆ'}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4">
                            {categories.filter(cat => cat !== 'IKE' && cat !== 'IKZE').map((category, index) => {
                                const categoryInvestments = investments.filter(inv => inv.category === category);
                                const total = getCategoryTotal(category);
                                
                                const gradients = {
                                    'Obligacje': 'from-purple-50 to-purple-100',
                                    'Lokaty': 'from-amber-50 to-amber-100',
                                    'ETFy': 'from-cyan-50 to-cyan-100',
                                    'PPK': 'from-pink-50 to-pink-100'
                                };
                                
                                return (
                                    <div key={category} className={`bg-gradient-to-r ${gradients[category]} rounded-xl p-4`}>
                                        <div className="flex items-center justify-between mb-3">
                                            <h3 className="font-semibold text-slate-700">{category}</h3>
                                            <span className="text-sm text-slate-600">{formatCurrency(total)}</span>
                                        </div>
                                        
                                        {categoryInvestments.length === 0 ? (
                                            <p className="text-slate-400 text-sm italic">Brak inwestycji</p>
                                        ) : (
                                            <div className="space-y-2">
                                                {categoryInvestments.map(inv => (
                                                    <div key={inv.id} className="flex items-center justify-between p-2 bg-white rounded-lg">
                                                        <div className="flex-1">
                                                            <p className="font-medium text-slate-700 text-sm">{inv.name}</p>
                                                            <p className="text-xs text-slate-600 font-semibold">{formatCurrency(inv.amount)}</p>
                                                        </div>
                                                        <button
                                                            onClick={() => deleteInvestment(inv.id)}
                                                            className="text-red-500 hover:text-red-700 p-1 transition-colors"
                                                        >
                                                            <Trash2 />
                                                        </button>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<InvestmentTracker />);
    </script>
</body>
</html>
